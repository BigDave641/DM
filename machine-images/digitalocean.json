{
  "variables": {
    "digital_ocean_api_token": "digital-ocean-api-token",
    "superuser_id": "provider-name:user-id",
    "google_key": "google-key",
    "google_secret": "google-secret",
    "github_key": "github-key",
    "github_secret": "github-secret",
    "doorkeeper_provider_base_url": "doorkeeper-provider-base-url",
    "doorkeeper_provider_key": "doorkeeper-provider-key",
    "doorkeeper_provider_secret": "doorkeeper-provider-secret"
  },
  "builders": [{
    "type": "digitalocean",
    "api_token": "{{ user `digital_ocean_api_token` }}",
    "image": "ubuntu-16-04-x64",
    "region": "nyc3",
    "size": "512mb",
    "snapshot_name": "dm-{{timestamp}}",
    "ssh_username": "root"
  }],
  "provisioners": [{
    "type": "ansible",
    "playbook_file": "./provisioning/playbook.yml",
    "groups": ["dm", "digitalocean"],
    "extra_arguments": ["--extra-vars", "superuser_id={{ user `superuser_id` }} google_key={{ user `google_key` }} google_secret={{ user `google_secret` }} github_key={{ user `github_key` }} github_secret={{ user `github_secret` }} doorkeeper_provider_base_url={{ user `doorkeeper_provider_base_url` }} doorkeeper_provider_key={{ user `doorkeeper_provider_key` }} doorkeeper_provider_secret={{ user `doorkeeper_provider_secret` }}"]
  }]
}
